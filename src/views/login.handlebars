{{!-- <div class="container"></div>
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title">Iniciar sesión</h2>
                <!-- login.handlebars -->
                <form action="/login" method="post">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email">


                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password">


                    <input type="submit" value="Login">
                </form>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Modal de éxito -->
<div class="modal fade" id="loginSuccessModal" tabindex="-1" role="dialog" aria-labelledby="loginSuccessModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginSuccessModalLabel">¡Bienvenido!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Has iniciado sesión correctamente.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de error -->
<div class="modal fade" id="loginErrorModal" tabindex="-1" role="dialog" aria-labelledby="loginErrorModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginErrorModalLabel">Error</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Ha ocurrido un error al iniciar sesión. Por favor, inténtelo de nuevo.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
    const loginSuccess = {{ loginSuccess }};
    const loginError = {{ loginError }};
    const registerSuccess = {{ registerSuccess }};
    const registerError = {{ registerError }};

    if (loginSuccess) {
        $('#loginSuccessModal').modal('show');
    }

    if (loginError) {
        $('#loginErrorModal').modal('show');
    }

    if (registerSuccess) {
        $('#registerSuccessModal').modal('show');
    }

    if (registerError) {
        $('#registerErrorModal').modal('show');
    }
    });
</script> --}}

<link rel="stylesheet" href="/css/login.css">

<div class="containerLo"></div>
<div class="row justify-content-centerLo">
    <div class="col-md-6Lo">
        <div class="cardLo">
            <div class="card-bodyLo">
                <h2 class="card-titleLo">Iniciar sesión</h2>
                <form action="/login" method="post" class="formLo" id="loginForm">
                    <label for="email" class="labelLo">Email:</label>
                    <input type="email" id="email" name="email" required class="inputLo">

                    <label for="password" class="labelLo">Password:</label>
                    <input type="password" id="password" name="password" required class="inputLo">

                    <input type="submit" value="Login" class="submitLo">
                </form>
                <div id="loginMessage" class="messageLo" style="display: none;"></div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de éxito -->
<div id="loginSuccessModal" class="modalLo" style="display: none;">
    <div class="modal-contentLo">
        <div class="modal-headerLo">
            <h5 class="modal-titleLo">¡Bienvenido!</h5>
            <button type="button" class="closeLo" id="closeSuccessModal">&times;</button>
        </div>
        <div class="modal-bodyLo">
            <p>Has iniciado sesión correctamente.</p>
        </div>
        <div class="modal-footerLo">
            <button type="button" class="btn btn-secondary" id="okSuccess">Ok</button>
        </div>
    </div>
</div>

<!-- Modal de error -->
<div id="loginErrorModal" class="modalLo" style="display: none;">
    <div class="modal-contentLo">
        <div class="modal-headerLo">
            <h5 class="modal-titleLo">Error</h5>
            <button type="button" class="closeLo" id="closeErrorModal">&times;</button>
        </div>
        <div class="modal-bodyLo">
            <p>Ha ocurrido un error al iniciar sesión. Por favor, inténtelo de nuevo.</p>
        </div>
        <div class="modal-footerLo">
            <button type="button" class="btn btn-secondary" id="okError">Ok</button>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#loginForm').on('submit', function (event) {
            event.preventDefault(); // Prevenir la redirección por defecto

            $.ajax({
                type: 'POST',
                url: '/login',
                data: $(this).serialize(),
                success: function (response) {
                    // Si el inicio de sesión es exitoso, muestra el modal de éxito
                    $('#loginSuccessModal').fadeIn();
                },
                error: function (xhr) {
                    // Si hay un error, muestra el modal de error
                    $('#loginErrorModal').fadeIn();
                }
            });
        });

        // Manejo de eventos para los botones de OK
        $('#okSuccess').click(function () {
            window.location.href = '/'; // Redirige a la página de inicio
        });

        $('#okError').click(function () {
            $('#loginErrorModal').fadeOut(); // Oculta el modal de error
        });

        // Cierre del modal al hacer clic en la X
        $('#closeSuccessModal, #closeErrorModal').click(function () {
            $(this).closest('.modalLo').fadeOut(); // Oculta el modal correspondiente
        });
    });
</script>

<style>
    .modalLo {
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
    }

    .modal-contentLo {
        background: white;
        padding: 20px;
        border-radius: 5px;
        width: 400px;
        text-align: center;
    }

    .modal-headerLo {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .closeLo {
        cursor: pointer;
        font-size: 20px;
    }
</style>

